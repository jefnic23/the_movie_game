<head>
    <title>The Movie Game</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="{{ url_for('static', filename='themoviedb.js') }}"></script>
    <script type=text/javascript>
        $(function() {
          $('#submit_search').bind('click', function() {
            $.getJSON('/round_start', {
              search: $('input#search').val(),
            }, function(data) {
              $("#result").text(data.result);
            });
            return false;
          });
        });

    </script>
</head>
<body>
    <img src="{{ url_for('static', filename='logo.png') }}" class="logo"/>
    <form>
        <input type="text" id="search" placeholder="search for an actor or movie...">
        <input type="submit" id="submit_search" value="submit">
    </form>
    <p id="result"></p>
    <script>

      var genres = [16, 99, 10402, 10770]

      function successCB(data) {
        data = JSON.parse(data);
        for (var i = 0; i < data.results.length; i++) {
          if (data.results[i].media_type === "movie" && !data.results[i].genre_ids.some(r => genres.includes(r)) && data.results[i].genre_ids.length) {
            console.log(data.results[i].title);
          } else if (data.results[i].media_type === "person") {
            console.log(data.results[i].name);
          }
          console.log(data.results[i]);
        }
      };
              
      function errorCB(data) {
        console.log("Error callback: " + data);
      };

      theMovieDb.search.getMulti({'query': "hoffman"}, successCB, errorCB)

    </script>
</body>